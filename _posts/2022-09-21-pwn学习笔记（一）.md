---
layout: post
title: "Pwn学习笔记 (一)"
author: "1llysviel"
categories: journal
tags: [documentation]
image: ELF.jpg
---

# Pwn学习笔记 一

----

## ELF文件概述

是一种用于**二进制文件**、**可执行文件**、**目标代码**、共享库和核心转储格式文件。

ELF文件分为：

ELF文件头（ELF header）

- 记录了ELF文件的组织结构

程序头表/段表（Program header table）

- 告诉系统如何生成进程
- 生成进程的可执行文件（.out'可执行文件'/.so"动态链接库“/.a"静态链接库''）必须拥有此结构
- **重定向文件**不一定需要（可能因为重定向文件与其链接的文件共用同一头或段？）
- sh_type

节（section）

-  Code
-  Data

节头表（section header table）

- 记录ELF文件的节区信息
- 用于链接的目标文件必须拥有此结构
- **其他类型的目标文件**不一定需要（可能因为链接的目标文件需要节区信息提供给被链接的文件）


## 程序进程装载与虚拟内存

### 节视图与段视图

​	节视图用于外存（磁盘）用来划分功能。

​	段视图用于内存中用来划分读写执行权限的。

​	CPU只能读取内存，但内存因为非连续内存分配机制（页，段，段页式）是离散的，对程序员可读性差，为此os会将内存中的数据转化成程序员可读性高的虚拟内存（分页机制）。

**非连续内存分配的优点：**

- 一个程序的物理地址空间是非连续的
- 更好的内存利用和管理
- 允许共享代码与数据（共享库等…）
- 支持动态加载和动态链接


### 二进制基础

​	地址以字节编码

​		1Byte=8bits

​	常以16进制表示

​		0x3c=0011 1100

​	虚拟内存**用户空间**每个进程一份	

​	虚拟内存**内核空间（Kernel）**所有进程共享一份

“虚拟内存的大小为2^32（在32位的x86机器上），内核将这4G字节的空间分为两部分。最高的1G字节（从虚地址0xC0000000到0xFFFFFFFF）供内核使用，称为“内核空间”。而较低的3G字节（从虚地址0x00000000到0xBFFFFFFF），供各个进程使用，称为“用户空间””

​	虚拟内存mmap段中的**动态链接库**仅在物理内存中装载一份

“动态链接库文件，是一种不可执行的二进制程序文件，它允许程序共享执行特殊任务所必需的代码和其他资源。”
